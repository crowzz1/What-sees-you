# ASCII 艺术视觉效果指南

## 功能介绍

新增了 ASCII 艺术风格的视觉效果，使用 0 和 1 字符来显示识别到的人物轮廓。这个效果受到经典 Matrix 风格启发，创造出赛博朋克的视觉体验。

## 效果模式

系统现在支持两种视觉特效模式：

1. **Silhouette（剪影模式）** - 默认模式
   - 显示黑色剪影和数据方块
   - 保留真实背景
   - 显示详细的识别信息

2. **ASCII Art（ASCII艺术模式）** - 新增模式
   - 使用 0 和 1 字符绘制人物轮廓
   - 黑色背景
   - 简化的识别信息显示
   - 基于人物亮度动态生成字符

## 使用方法

### 基本控制（适用于 main.py）

```
按键说明：
  'e' - 开启/关闭视觉特效
  'm' - 切换特效模式（剪影 ⇄ ASCII艺术）
  's' - 保存当前画面截图
  'q' - 退出程序
```

### 机械臂追踪版本控制（适用于 main_sts_tracking.py）

```
按键说明：
  't' - 开始/停止追踪
  'e' - 使能/失能电机
  'v' - 开启/关闭视觉特效
  'm' - 切换特效模式（剪影 ⇄ ASCII艺术）
  's' - 保存截图
  'q' - 退出
```

## 使用流程

1. **启动程序**
   ```bash
   python main.py
   ```

2. **开启视觉特效**
   - 按 `e` 键开启特效

3. **切换到 ASCII 模式**
   - 按 `m` 键切换到 ASCII 艺术模式
   - 再次按 `m` 可以切换回剪影模式

4. **调整效果参数**（可选）
   - 在 `person_analyzer.py` 中修改这些参数：
     ```python
     self.ascii_grid_size = 12  # 字符大小（越小越密集）
     self.ascii_threshold = 50  # 亮度阈值（越大越少字符）
     self.ascii_chars = ['0', '1']  # 使用的字符
     ```

## 效果参数说明

### `ascii_grid_size`（网格大小）
- **默认值**: 12
- **范围**: 8-20 推荐
- **效果**: 控制字符的大小和密度
  - 数值越小 → 字符越多越密集 → 更清晰但更卡顿
  - 数值越大 → 字符越少越稀疏 → 更流畅但不够细致

### `ascii_threshold`（亮度阈值）
- **默认值**: 50
- **范围**: 0-255
- **效果**: 控制哪些区域显示字符
  - 数值越小 → 更多字符（包括暗部）
  - 数值越大 → 更少字符（只有亮部）

### `ascii_chars`（字符集）
- **默认值**: `['0', '1']`
- **可选方案**:
  - Matrix 风格: `['0', '1']`
  - 复杂符号: `[' ', '.', ':', '-', '=', '+', '*', '#', '%', '@']`
  - 数字: `['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']`
  - 字母: `['A', 'B', 'C', 'D', 'E', 'F']`

## 示例配置

### 配置 1: Matrix 风格（默认）
```python
self.ascii_grid_size = 12
self.ascii_threshold = 50
self.ascii_chars = ['0', '1']
```
**效果**: 经典 Matrix 风格，0 和 1 随机显示

### 配置 2: 高密度
```python
self.ascii_grid_size = 8
self.ascii_threshold = 30
self.ascii_chars = ['0', '1']
```
**效果**: 更多字符，更清晰的轮廓（需要更高性能）

### 配置 3: 简约风格
```python
self.ascii_grid_size = 16
self.ascii_threshold = 80
self.ascii_chars = ['1']
```
**效果**: 只用 1 显示，更稀疏，极简风格

### 配置 4: 渐变符号
```python
self.ascii_grid_size = 10
self.ascii_threshold = 30
self.ascii_chars = ['.', ':', '+', '#', '@']
```
**效果**: 使用多种符号，创造深度感

## 性能优化建议

如果遇到卡顿，可以：

1. **增大网格尺寸**
   ```python
   self.ascii_grid_size = 16  # 从 12 增大到 16
   ```

2. **提高亮度阈值**
   ```python
   self.ascii_threshold = 80  # 从 50 提高到 80
   ```

3. **减少字符种类**
   ```python
   self.ascii_chars = ['1']  # 只用一个字符
   ```

## 技术原理

1. **人物分割**: 使用 YOLOv8-Seg 精确分割人物轮廓
2. **网格采样**: 在人物区域按网格采样亮度值
3. **字符渲染**: 根据亮度阈值决定是否绘制字符
4. **随机选择**: 从字符集中随机选择字符显示

## 常见问题

**Q: 为什么 ASCII 效果看不到字符？**
A: 可能是亮度阈值太高，尝试降低 `ascii_threshold` 到 20-30

**Q: 字符太密集/太稀疏？**
A: 调整 `ascii_grid_size`，推荐范围 8-20

**Q: 可以自定义字符吗？**
A: 可以！修改 `ascii_chars` 列表，添加任何你想要的字符

**Q: ASCII 模式下识别信息不显示？**
A: ASCII 模式使用简化的信息显示（绿色），包括 Person ID 和 Age

## 截图保存

在任何模式下按 `s` 键可以保存当前画面截图，文件名格式：
- `camera_1_screenshot.jpg` (单摄像头)
- `capture_<timestamp>.jpg` (机械臂追踪版本)

## 与其他功能的兼容性

- ✅ 与人体识别完全兼容
- ✅ 与年龄检测完全兼容
- ✅ 与情绪识别完全兼容
- ✅ 与服装分析完全兼容
- ✅ 可在机械臂追踪模式下使用

## 未来改进方向

- [ ] 添加颜色 ASCII（彩色字符）
- [ ] 根据亮度自动选择不同字符（渐变效果）
- [ ] 添加动态下落效果（Matrix 雨）
- [ ] 支持自定义背景颜色
- [ ] 添加字符闪烁效果

---

**开发者**: 基于 YOLOv8 和 OpenCV
**版本**: 1.0
**最后更新**: 2025-11-27






