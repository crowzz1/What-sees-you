"""
机械臂追踪系统 - 配置文件
修改这个文件来调整系统参数
"""

# ============================================================
# 硬件配置
# ============================================================

# ESP32 串口端口
# Windows: 'COM3', 'COM4', 等
# Linux/Mac: '/dev/ttyUSB0', '/dev/ttyACM0', 等
ARM_PORT = 'COM3'

# 串口波特率（不要修改，除非你修改了ESP32固件）
ARM_BAUDRATE = 115200

# 摄像头设备ID
# 0 = 默认摄像头（通常是笔记本内置摄像头）
# 1, 2, 3... = 外接USB摄像头
CAMERA_ID = 0

# 摄像头分辨率
CAMERA_WIDTH = 640
CAMERA_HEIGHT = 480


# ============================================================
# 追踪参数
# ============================================================

# 平滑滤波系数 (0.0 - 1.0)
# 较小的值 = 更平滑，但响应较慢
# 较大的值 = 响应快，但可能抖动
# 推荐: 0.2 - 0.5
SMOOTH_ALPHA = 0.3

# 最小移动阈值（度）
# 只有当目标角度变化超过这个值时，机械臂才会移动
# 较小的值 = 更精确追踪，但可能频繁移动
# 较大的值 = 减少不必要的移动，但精度降低
# 推荐: 2.0 - 5.0
MIN_MOVE_THRESHOLD = 2.0

# 机械臂移动速度 (1-127)
# 注意: 如果有减速器，实际输出速度 = 速度 ÷ 减速比
# 例如: 速度80, 减速比8:1, 实际输出速度 = 80÷8 = 10
# 推荐: 60 - 100
ARM_SPEED = 80


# ============================================================
# 角度映射范围
# ============================================================

# 基座旋转角度范围（度）
# 人在画面最左侧 -> BASE_ANGLE_MIN
# 人在画面最右侧 -> BASE_ANGLE_MAX
BASE_ANGLE_MIN = -90
BASE_ANGLE_MAX = 90

# 大臂抬升角度范围（度）
# 人在画面最上方 -> ARM_ANGLE_MAX
# 人在画面最下方 -> ARM_ANGLE_MIN
ARM_ANGLE_MIN = 0
ARM_ANGLE_MAX = 90


# ============================================================
# 显示设置
# ============================================================

# 是否显示关键点
SHOW_KEYPOINTS = True

# 是否显示骨架
SHOW_SKELETON = True

# 是否显示追踪信息（十字准星、角度等）
SHOW_TRACKING_INFO = True

# 是否显示FPS
SHOW_FPS = True


# ============================================================
# 性能设置
# ============================================================

# 人体识别处理频率
# 每 N 帧处理一次完整的人体分析
# 较大的值 = 更高FPS，但识别更新较慢
# 推荐: 1 (每帧) 或 2 (隔帧)
PROCESS_EVERY_N_FRAMES = 1

# 情感识别处理频率
# 每 N 帧进行一次情感识别
# 情感识别比较耗时，可以降低频率
# 推荐: 5 - 10
EMOTION_EVERY_N_FRAMES = 10


# ============================================================
# 追踪行为
# ============================================================

# 目标选择模式
# 'nearest' - 追踪最近的人（边界框最大）
# 'first' - 追踪第一个检测到的人
# 'manual' - 手动选择（通过鼠标点击）
TARGET_SELECTION_MODE = 'nearest'

# 启动时是否自动开始追踪
AUTO_START_TRACKING = True

# 启动时是否自动使能电机
AUTO_ENABLE_MOTORS = True


# ============================================================
# 安全设置
# ============================================================

# 最大连续移动时间（秒）
# 防止电机长时间连续运转过热
# 超过此时间会自动停止
MAX_CONTINUOUS_MOVE_TIME = 30.0

# 无目标时的行为
# 'stop' - 停止电机
# 'hold' - 保持当前位置
# 'home' - 回到初始位置
NO_TARGET_BEHAVIOR = 'stop'


# ============================================================
# 调试设置
# ============================================================

# 是否打印调试信息
DEBUG = False

# 是否保存追踪数据日志
SAVE_LOG = False

# 日志文件路径
LOG_FILE = 'tracking_log.txt'


# ============================================================
# 高级设置（不推荐修改）
# ============================================================

# 命令队列大小
COMMAND_QUEUE_SIZE = 10

# 串口读取超时（秒）
SERIAL_TIMEOUT = 1.0

# 串口重连尝试次数
SERIAL_RETRY_COUNT = 3

# 摄像头缓冲区大小
CAMERA_BUFFER_SIZE = 1









